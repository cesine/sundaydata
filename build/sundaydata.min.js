(function(){var e="enyo.js";enyo=window.enyo||{},enyo.locateScript=function(e){for(var n,t,o=document.getElementsByTagName("script"),r=o.length-1,i=e.length;r>=0&&(n=o[r]);r--)if(!n.located&&(t=n.getAttribute("src")||"",t.slice(-i)==e))return n.located=!0,{path:t.slice(0,Math.max(0,t.lastIndexOf("/"))),node:n}},enyo.args=enyo.args||{};var n=enyo.locateScript(e);if(n){enyo.args.root=(enyo.args.root||n.path).replace("/source","");for(var t,o=0;t=n.node.attributes.item(o);o++)enyo.args[t.nodeName]=t.value}})(),function(){enyo=window.enyo||{},enyo.path={paths:{},addPath:function(e,n){return this.paths[e]=n},addPaths:function(e){if(e)for(var n in e)this.addPath(n,e[n])},includeTrailingSlash:function(e){return e&&"/"!==e.slice(-1)?e+"/":e},rewritePattern:/\$([^\/\\]*)(\/)?/g,rewrite:function(e){var n,t=this.includeTrailingSlash,o=this.paths,r=function(e,r){return n=!0,t(o[r])||""},i=e;do n=!1,i=i.replace(this.rewritePattern,r);while(n);return i}},enyo.loaderFactory=function(e){this.machine=e,this.packages=[],this.modules=[],this.sheets=[],this.stack=[]},enyo.loaderFactory.prototype={packageName:"",packageFolder:"",verbose:!1,finishCallbacks:{},loadScript:function(e){this.machine.script(e)},loadSheet:function(e){this.machine.sheet(e)},loadPackage:function(e){this.machine.script(e)},report:function(){},load:function(){this.more({index:0,depends:arguments||[]})},more:function(e){if(!e||!this.continueBlock(e)){var n=this.stack.pop();n?(this.verbose&&console.groupEnd("* finish package ("+(n.packageName||"anon")+")"),this.packageFolder=n.folder,this.packageName="",this.more(n)):this.finish()}},finish:function(){this.packageFolder="",this.verbose&&console.log("-------------- fini");for(var e in this.finishCallbacks)this.finishCallbacks[e]&&(this.finishCallbacks[e](),this.finishCallbacks[e]=null)},continueBlock:function(e){for(;e.index<e.depends.length;){var n=e.depends[e.index++];if(n)if("string"==typeof n){if(this.require(n,e))return!0}else enyo.path.addPaths(n)}},require:function(e,n){var t=enyo.path.rewrite(e),o=this.getPathPrefix(e);if(t=o+t,".css"==t.slice(-4)||".less"==t.slice(-5))this.verbose&&console.log("+ stylesheet: ["+o+"]["+e+"]"),this.requireStylesheet(t);else{if(".js"!=t.slice(-3)||"package.js"==t.slice(-10))return this.requirePackage(t,n),!0;this.verbose&&console.log("+ module: ["+o+"]["+e+"]"),this.requireScript(e,t)}},getPathPrefix:function(e){var n=e.slice(0,1);return"/"!=n&&"\\"!=n&&"$"!=n&&"http:"!=e.slice(0,5)?this.packageFolder:""},requireStylesheet:function(e){this.sheets.push(e),this.loadSheet(e)},requireScript:function(e,n){this.modules.push({packageName:this.packageName,rawPath:e,path:n}),this.loadScript(n)},decodePackagePath:function(e){var n="",t="",o="",r="package.js",i=e.replace(/\\/g,"/").replace(/\/\//g,"/").replace(/:\//,"://").split("/");if(i.length){var s=i.pop()||i.pop()||"";s.slice(-r.length)!==r?i.push(s):r=s,o=i.join("/"),o=o?o+"/":"",r=o+r;for(var a=i.length-1;a>=0;a--)if("source"==i[a]){i.splice(a,1);break}t=i.join("/");for(var c,a=i.length-1;c=i[a];a--)if("lib"==c||"enyo"==c){i=i.slice(a+1);break}for(var c,a=i.length-1;c=i[a];a--)(".."==c||"."==c)&&i.splice(a,1);n=i.join("-")}return{alias:n,target:t,folder:o,manifest:r}},aliasPackage:function(e){var n=this.decodePackagePath(e);this.manifest=n.manifest,n.alias&&(enyo.path.addPath(n.alias,n.target),this.packageName=n.alias,this.packages.push({name:n.alias,folder:n.folder})),this.packageFolder=n.folder},requirePackage:function(e,n){n.folder=this.packageFolder,this.aliasPackage(e),n.packageName=this.packageName,this.stack.push(n),this.report("loading package",this.packageName),this.verbose&&console.group("* start package ["+this.packageName+"]"),this.loadPackage(this.manifest)}}}(),enyo.machine={sheet:function(e){var n="text/css",t="stylesheet",o=".less"==e.slice(-5);o&&(window.less?(n="text/less",t="stylesheet/less"):e=e.slice(0,e.length-4)+"css");var r;enyo.runtimeLoading||o?(r=document.createElement("link"),r.href=e,r.media="screen",r.rel=t,r.type=n,document.getElementsByTagName("head")[0].appendChild(r)):document.write('<link href="'+e+'" media="screen" rel="'+t+'" type="'+n+'" />'),o&&window.less&&(less.sheets.push(r),enyo.loader.finishCallbacks.lessRefresh||(enyo.loader.finishCallbacks.lessRefresh=function(){less.refresh(!0)}))},script:function(e,n,t){if(enyo.runtimeLoading){var o=document.createElement("script");o.src=e,o.onLoad=n,o.onError=t,document.getElementsByTagName("head")[0].appendChild(o)}else document.write('<script src="'+e+'"'+(n?' onload="'+n+'"':"")+(t?' onerror="'+t+'"':"")+"></scri"+"pt>")},inject:function(e){document.write('<script type="text/javascript">'+e+"</script>")}},enyo.loader=new enyo.loaderFactory(enyo.machine),enyo.depends=function(){var e=enyo.loader;if(!e.packageFolder){var n=enyo.locateScript("package.js");n&&n.path&&(e.aliasPackage(n.path),e.packageFolder=n.path+"/")}e.load.apply(e,arguments)},function(){function e(o){if(o&&o(),t.length){var r=t.shift(),i=r[0],s=n.isArray(i)?i:[i],a=r[1];n.loader.finishCallbacks.runtimeLoader=function(){e(function(){a&&a(i)})},n.loader.packageFolder="./",n.depends.apply(this,s)}else n.runtimeLoading=!1,n.loader.packageFolder=""}var n=window.enyo,t=[];n.load=function(){t.push(arguments),n.runtimeLoading||(n.runtimeLoading=!0,e())}}(),enyo.path.addPaths({enyo:enyo.args.root,lib:"$enyo/../lib"}),enyo.logging={level:99,levels:{log:20,warn:10,error:0},shouldLog:function(e){var n=parseInt(this.levels[e],0);return this.level>=n},_log:function(e,n){var t=enyo.isArray(n)?n:enyo.cloneArray(n);enyo.dumbConsole&&(t=[t.join(" ")]);var o=console[e];o&&o.apply?o.apply(console,t):console.log.apply?console.log.apply(console,t):console.log(t.join(" "))},log:function(e,n){window.console&&this.shouldLog(e)&&this._log(e,n)}},enyo.setLogLevel=function(e){var n=parseInt(e,0);isFinite(n)&&(enyo.logging.level=n)},enyo.log=function(){enyo.logging.log("log",arguments)},enyo.warn=function(){enyo.logging.log("warn",arguments)},enyo.error=function(){enyo.logging.log("error",arguments)},function(){enyo.global=this,enyo._getProp=function(e,n,t){for(var o,r=t||enyo.global,i=0;r&&(o=e[i]);i++)r=o in r?r[o]:n?r[o]={}:void 0;return r},enyo.setObject=function(e,n,t){var o=e.split("."),r=o.pop(),i=enyo._getProp(o,!0,t);return i&&r?i[r]=n:void 0},enyo.getObject=function(e,n,t){return enyo._getProp(e.split("."),n,t)},enyo.irand=function(e){return Math.floor(Math.random()*e)},enyo.cap=function(e){return e.slice(0,1).toUpperCase()+e.slice(1)},enyo.uncap=function(e){return e.slice(0,1).toLowerCase()+e.slice(1)},enyo.format=function(e){var n=/\%./g,t=0,o=e,r=arguments,i=function(){return r[++t]};return o.replace(n,i)};var e=Object.prototype.toString;enyo.isString=function(n){return"[object String]"===e.call(n)},enyo.isFunction=function(n){return"[object Function]"===e.call(n)},enyo.isArray=Array.isArray||function(n){return"[object Array]"===e.call(n)},enyo.indexOf=function(e,n,t){if(n.indexOf)return n.indexOf(e,t);if(t&&(0>t&&(t=0),t>n.length))return-1;for(var o,r=t||0,i=n.length;(o=n[r])||i>r;r++)if(o==e)return r;return-1},enyo.remove=function(e,n){var t=enyo.indexOf(e,n);t>=0&&n.splice(t,1)},enyo.forEach=function(e,n,t){if(e){var o=t||this;if(enyo.isArray(e)&&e.forEach)e.forEach(n,o);else for(var r=Object(e),i=r.length>>>0,s=0;i>s;s++)s in r&&n.call(o,r[s],s,r)}},enyo.map=function(e,n,t){var o=t||this;if(enyo.isArray(e)&&e.map)return e.map(n,o);var r=[],i=function(e,t,i){r.push(n.call(o,e,t,i))};return enyo.forEach(e,i,o),r},enyo.filter=function(e,n,t){var o=t||this;if(enyo.isArray(e)&&e.filter)return e.filter(n,o);var r=[],i=function(e,t,i){var s=e;n.call(o,e,t,i)&&r.push(s)};return enyo.forEach(e,i,o),r},enyo.keys=Object.keys||function(e){var n=[],t=Object.prototype.hasOwnProperty;for(var o in e)t.call(e,o)&&n.push(o);if(!{toString:null}.propertyIsEnumerable("toString"))for(var r,i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=0;r=i[s];s++)t.call(e,r)&&n.push(r);return n},enyo.cloneArray=function(e,n,t){for(var o=t||[],r=n||0,i=e.length;i>r;r++)o.push(e[r]);return o},enyo.toArray=enyo.cloneArray,enyo.clone=function(e){return enyo.isArray(e)?enyo.cloneArray(e):enyo.mixin({},e)};var n={};enyo.mixin=function(e,t){if(e=e||{},t){var o,r;for(o in t)r=t[o],n[o]!==r&&(e[o]=r)}return e},enyo.bind=function(e,n){if(n||(n=e,e=null),e=e||enyo.global,enyo.isString(n)){if(!e[n])throw['enyo.bind: scope["',n,'"] is null (scope="',e,'")'].join("");n=e[n]}if(enyo.isFunction(n)){var t=enyo.cloneArray(arguments,2);return n.bind?n.bind.apply(n,[e].concat(t)):function(){var o=enyo.cloneArray(arguments);return n.apply(e,t.concat(o))}}throw['enyo.bind: scope["',n,'"] is not a function (scope="',e,'")'].join("")},enyo.asyncMethod=function(){return setTimeout(enyo.bind.apply(enyo,arguments),1)},enyo.call=function(e,n,t){var o=e||this;if(n){var r=o[n]||n;if(r&&r.apply)return r.apply(o,t||[])}},enyo.now=Date.now||function(){return(new Date).getTime()},enyo.nop=function(){},enyo.nob={},enyo.nar=[],enyo.instance=function(){},enyo.setPrototype||(enyo.setPrototype=function(e,n){e.prototype=n}),enyo.delegate=function(e){return enyo.setPrototype(enyo.instance,e),new enyo.instance},$L=function(e){return e}}(),enyo.job=function(e,n,t){enyo.job.stop(e),enyo.job._jobs[e]=setTimeout(function(){enyo.job.stop(e),n()},t)},enyo.job.stop=function(e){enyo.job._jobs[e]&&(clearTimeout(enyo.job._jobs[e]),delete enyo.job._jobs[e])},enyo.job._jobs={},enyo.macroize=function(e,n,t){var o,r,i=e,s=t||enyo.macroize.pattern,a=function(e,t){return o=enyo.getObject(t,!1,n),void 0===o||null===o?"{$"+t+"}":(r=!0,o)},c=0;do if(r=!1,i=i.replace(s,a),++c>=20)throw"enyo.macroize: recursion too deep";while(r);return i},enyo.quickMacroize=function(e,n,t){var o,r=e,i=t||enyo.macroize.pattern,s=function(e,t){return o=t in n?n[t]:enyo.getObject(t,!1,n),void 0===o||null===o?"{$"+t+"}":o};return r=r.replace(i,s)},enyo.macroize.pattern=/\{\$([^{}]*)\}/g,enyo.kind=function(e){enyo._kindCtors={};var n=e.name||"";delete e.name;var t="kind"in e,o=e.kind;delete e.kind;var r=enyo.constructorForKind(o),i=r&&r.prototype||null;if(t&&void 0===o||void 0===r)throw"enyo.kind: Attempt to subclass an undefined kind. Check dependencies for ["+(n||"<unnamed>")+"].";var s=enyo.kind.makeCtor();return e.hasOwnProperty("constructor")&&(e._constructor=e.constructor,delete e.constructor),enyo.setPrototype(s,i?enyo.delegate(i):{}),enyo.mixin(s.prototype,e),s.prototype.kindName=n,s.prototype.base=r,s.prototype.ctor=s,enyo.forEach(enyo.kind.features,function(n){n(s,e)}),enyo.setObject(n,s),s},enyo.singleton=function(e,n){var t=e.name;delete e.name;var o=enyo.kind(e);enyo.setObject(t,new o,n)},enyo.kind.makeCtor=function(){return function(){if(!(this instanceof arguments.callee))throw"enyo.kind: constructor called directly, not using 'new'";var e;return this._constructor&&(e=this._constructor.apply(this,arguments)),this.constructed&&this.constructed.apply(this,arguments),e?e:void 0}},enyo.kind.defaultNamespace="enyo",enyo.kind.features=[],enyo.kind.features.push(function(e,n){var t=e.prototype;if(t.inherited||(t.inherited=enyo.kind.inherited),t.base)for(var o in n){var r=n[o];enyo.isFunction(r)&&(r._inherited=t.base.prototype[o]||enyo.nop,r.nom=t.kindName+"."+o+"()")}}),enyo.kind.inherited=function(e,n){return e.callee._inherited.apply(this,n||e)},enyo.kind.features.push(function(e,n){enyo.mixin(e,enyo.kind.statics),n.statics&&(enyo.mixin(e,n.statics),delete e.prototype.statics);for(var t=e.prototype.base;t;)t.subclass(e,n),t=t.prototype.base}),enyo.kind.statics={subclass:function(){},extend:function(e){enyo.mixin(this.prototype,e);var n=this;enyo.forEach(enyo.kind.features,function(t){t(n,e)})}},enyo._kindCtors={},enyo.constructorForKind=function(e){if(null===e||enyo.isFunction(e))return e;if(e){var n=enyo._kindCtors[e];return n?n:enyo._kindCtors[e]=enyo.Theme[e]||enyo[e]||enyo.getObject(e,!1,enyo)||window[e]||enyo.getObject(e)}return enyo.defaultCtor},enyo.Theme={},enyo.registerTheme=function(e){enyo.mixin(enyo.Theme,e)},enyo.kind({name:"enyo.Object",kind:null,constructor:function(){enyo._objectCount++},setPropertyValue:function(e,n,t){if(this[t]){var o=this[e];this[e]=n,this[t](o)}else this[e]=n},_setProperty:function(e,n,t){this.setPropertyValue(e,n,this.getProperty(e)!==n&&t)},destroyObject:function(e){this[e]&&this[e].destroy&&this[e].destroy(),this[e]=null},getProperty:function(e){var n="get"+enyo.cap(e);return this[n]?this[n]():this[e]},setProperty:function(e,n){var t="set"+enyo.cap(e);this[t]?this[t](n):this._setProperty(e,n,e+"Changed")},log:function(){var e=arguments.callee.caller,n=((e?e.nom:"")||"(instance method)")+":";enyo.logging.log("log",[n].concat(enyo.cloneArray(arguments)))},warn:function(){this._log("warn",arguments)},error:function(){this._log("error",arguments)},_log:function(e,n){if(enyo.logging.shouldLog(e))try{throw Error()}catch(t){enyo.logging._log(e,[n.callee.caller.nom+": "].concat(enyo.cloneArray(n))),enyo.log(t.stack)}}}),enyo._objectCount=0,enyo.Object.subclass=function(e,n){this.publish(e,n)},enyo.Object.publish=function(e,n){var t=n.published;if(t){var o=e.prototype;for(var r in t)enyo.Object.addGetterSetter(r,t[r],o)}},enyo.Object.addGetterSetter=function(e,n,t){var o=e;t[o]=n;var r=enyo.cap(o),i="get"+r;t[i]||(t[i]=function(){return this[o]});var s="set"+r,a=o+"Changed";t[s]||(t[s]=function(e){this._setProperty(o,e,a)})},enyo.kind({name:"enyo.Component",kind:enyo.Object,published:{name:"",id:"",owner:null},statics:{_kindPrefixi:{},_unnamedKindNumber:0},defaultKind:"Component",handlers:{},toString:function(){return this.kindName},constructor:function(){this._componentNameMap={},this.$={},this.inherited(arguments)},constructed:function(e){this.importProps(e),this.create()},importProps:function(e){if(e)for(var n in e)this[n]=e[n];this.handlers=enyo.mixin(enyo.clone(this.kindHandlers),this.handlers)},create:function(){this.ownerChanged(),this.initComponents()},initComponents:function(){this.createChrome(this.kindComponents),this.createClientComponents(this.components)},createChrome:function(e){this.createComponents(e,{isChrome:!0})},createClientComponents:function(e){this.createComponents(e,{owner:this.getInstanceOwner()})},getInstanceOwner:function(){return!this.owner||this.owner.notInstanceOwner?this:this.owner},destroy:function(){this.destroyComponents(),this.setOwner(null),this.destroyed=!0},destroyComponents:function(){enyo.forEach(this.getComponents(),function(e){e.destroyed||e.destroy()})},makeId:function(){var e="_",n=this.owner&&this.owner.getId(),t=this.name||"@@"+ ++enyo.Component._unnamedKindNumber;return(n?n+e:"")+t},ownerChanged:function(e){e&&e.removeComponent(this),this.owner&&this.owner.addComponent(this),this.id||(this.id=this.makeId())},nameComponent:function(e){var n,t=enyo.Component.prefixFromKindName(e.kindName),o=this._componentNameMap[t]||0;do n=t+(++o>1?o+"":"");while(this.$[n]);return this._componentNameMap[t]=Number(o),e.name=n},addComponent:function(e){var n=e.getName();n||(n=this.nameComponent(e)),this.$[n]&&this.warn('Duplicate component name "'+n+'" in owner "'+this.id+'" violates unique-name-under-owner rule, replacing existing component in the hash and continuing, but this is an error condition and should be fixed.'),this.$[n]=e},removeComponent:function(e){delete this.$[e.getName()]},getComponents:function(){var e=[];for(var n in this.$)e.push(this.$[n]);return e},adjustComponentProps:function(e){this.defaultProps&&enyo.mixin(e,this.defaultProps),e.kind=e.kind||e.isa||this.defaultKind,e.owner=e.owner||this},_createComponent:function(e,n){if(!e.kind&&"kind"in e)throw"enyo.create: Attempt to create a null kind. Check dependencies for ["+e.name+"].";var t=enyo.mixin(enyo.clone(n),e);return this.adjustComponentProps(t),enyo.Component.create(t)},createComponent:function(e,n){return this._createComponent(e,n)},createComponents:function(e,n){if(e){for(var t,o=[],r=0;t=e[r];r++)o.push(this._createComponent(t,n));return o}},getBubbleTarget:function(){return this.owner},bubble:function(e,n,t){var o=n||{};return"originator"in o||(o.originator=t||this),this.dispatchBubble(e,o,t)},bubbleUp:function(e,n){var t=this.getBubbleTarget();return t?t.dispatchBubble(e,n,this):!1},dispatchEvent:function(e,n,t){return this.decorateEvent(e,n,t),this.handlers[e]&&this.dispatch(this.handlers[e],n,t)?!0:this[e]?this.bubbleDelegation(this.owner,this[e],e,n,this):void 0},dispatchBubble:function(e,n,t){return this.dispatchEvent(e,n,t)?!0:this.bubbleUp(e,n,t)},decorateEvent:function(){},bubbleDelegation:function(e,n,t,o,r){var i=this.getBubbleTarget();return i?i.delegateEvent(e,n,t,o,r):void 0},delegateEvent:function(e,n,t,o,r){return this.decorateEvent(t,o,r),e==this?this.dispatch(n,o,r):this.bubbleDelegation(e,n,t,o,r)},dispatch:function(e,n,t){var o=e&&this[e];return o?o.call(this,t||this,n):void 0},waterfall:function(e,n,t){return this.dispatchEvent(e,n,t)?!0:(this.waterfallDown(e,n,t||this),void 0)},waterfallDown:function(e,n,t){for(var o in this.$)this.$[o].waterfall(e,n,t)}}),enyo.defaultCtor=enyo.Component,enyo.create=enyo.Component.create=function(e){if(!e.kind&&"kind"in e)throw"enyo.create: Attempt to create a null kind. Check dependencies for ["+(e.name||"")+"].";var n=e.kind||e.isa||enyo.defaultCtor,t=enyo.constructorForKind(n);return t||(console.error('no constructor found for kind "'+n+'"'),t=enyo.Component),new t(e)},enyo.Component.subclass=function(e,n){var t=e.prototype;if(n.components&&(t.kindComponents=n.components,delete t.components),n.handlers){var o=t.kindHandlers;t.kindHandlers=enyo.mixin(enyo.clone(o),t.handlers),t.handlers=null}n.events&&this.publishEvents(e,n)},enyo.Component.publishEvents=function(e,n){var t=n.events;if(t){var o=e.prototype;for(var r in t)this.addEvent(r,t[r],o)}},enyo.Component.addEvent=function(e,n,t){var o,r;enyo.isString(n)?("on"!=e.slice(0,2)&&(enyo.warn("enyo.Component.addEvent: event names must start with 'on'. "+t.kindName+" event '"+e+"' was auto-corrected to 'on"+e+"'."),e="on"+e),o=n,r="do"+enyo.cap(e.slice(2))):(o=n.value,r=n.caller),t[e]=o,t[r]||(t[r]=function(n){return this.bubble(e,n)})},enyo.Component.prefixFromKindName=function(e){var n=enyo.Component._kindPrefixi[e];if(!n){var t=e.lastIndexOf(".");n=t>=0?e.slice(t+1):e,n=n.charAt(0).toLowerCase()+n.slice(1),enyo.Component._kindPrefixi[e]=n}return n},enyo.kind({name:"enyo.UiComponent",kind:enyo.Component,published:{container:null,parent:null,controlParentName:"client",layoutKind:""},handlers:{onresize:"resizeHandler"},addBefore:void 0,statics:{_resizeFlags:{showingOnly:!0}},create:function(){this.controls=[],this.children=[],this.containerChanged(),this.inherited(arguments),this.layoutKindChanged()},destroy:function(){this.destroyClientControls(),this.setContainer(null),this.inherited(arguments)},importProps:function(){this.inherited(arguments),this.owner||(this.owner=enyo.master)},createComponents:function(){var e=this.inherited(arguments);return this.discoverControlParent(),e},discoverControlParent:function(){this.controlParent=this.$[this.controlParentName]||this.controlParent},adjustComponentProps:function(e){e.container=e.container||this,this.inherited(arguments)},containerChanged:function(e){e&&e.removeControl(this),this.container&&this.container.addControl(this,this.addBefore)},parentChanged:function(e){e&&e!=this.parent&&e.removeChild(this)},isDescendantOf:function(e){for(var n=this;n&&n!=e;)n=n.parent;return e&&n==e},getControls:function(){return this.controls},getClientControls:function(){for(var e,n=[],t=0,o=this.controls;e=o[t];t++)e.isChrome||n.push(e);return n},destroyClientControls:function(){for(var e,n=this.getClientControls(),t=0;e=n[t];t++)e.destroy()},addControl:function(e,n){this.controls.push(e),this.addChild(e,n)},removeControl:function(e){return e.setParent(null),enyo.remove(e,this.controls)},indexOfControl:function(e){return enyo.indexOf(e,this.controls)},indexOfClientControl:function(e){return enyo.indexOf(e,this.getClientControls())},indexInContainer:function(){return this.container.indexOfControl(this)},clientIndexInContainer:function(){return this.container.indexOfClientControl(this)},controlAtIndex:function(e){return this.controls[e]},addChild:function(e,n){if(this.controlParent)this.controlParent.addChild(e);else if(e.setParent(this),void 0!==n){var t=null===n?0:this.indexOfChild(n);this.children.splice(t,0,e)}else this.children.push(e)},removeChild:function(e){return enyo.remove(e,this.children)},indexOfChild:function(e){return enyo.indexOf(e,this.children)},layoutKindChanged:function(){this.layout&&this.layout.destroy(),this.layout=enyo.createFromKind(this.layoutKind,this),this.generated&&this.render()},flow:function(){this.layout&&this.layout.flow()},reflow:function(){this.layout&&this.layout.reflow()},resized:function(){this.waterfall("onresize",enyo.UiComponent._resizeFlags),this.waterfall("onpostresize",enyo.UiComponent._resizeFlags)},resizeHandler:function(){this.reflow()},waterfallDown:function(e,n,t){for(var o in this.$)this.$[o]instanceof enyo.UiComponent||this.$[o].waterfall(e,n,t);for(var r,i=0,s=this.children;r=s[i];i++)(r.showing||!n||!n.showingOnly)&&r.waterfall(e,n,t)},getBubbleTarget:function(){return this.parent}}),enyo.createFromKind=function(e,n){var t=e&&enyo.constructorForKind(e);return t?new t(n):void 0},enyo.master=new enyo.Component({name:"master",notInstanceOwner:!0,eventFlags:{showingOnly:!0},getId:function(){return""},isDescendantOf:enyo.nop,bubble:function(e,n){"onresize"==e?(enyo.master.waterfallDown("onresize",this.eventFlags),enyo.master.waterfallDown("onpostresize",this.eventFlags)):enyo.Signals.send(e,n)}}),enyo.kind({name:"enyo.Signals",kind:enyo.Component,create:function(){this.inherited(arguments),enyo.Signals.addListener(this)},destroy:function(){enyo.Signals.removeListener(this),this.inherited(arguments)},notify:function(e,n){this.dispatchEvent(e,n)},statics:{listeners:[],addListener:function(e){this.listeners.push(e)},removeListener:function(e){enyo.remove(e,this.listeners)},send:function(e,n){enyo.forEach(this.listeners,function(t){t.notify(e,n)})}}}),enyo.kind({name:"enyo.Async",kind:enyo.Object,published:{timeout:0},failed:!1,context:null,constructor:function(){this.responders=[],this.errorHandlers=[]},accumulate:function(e,n){var t=2>n.length?n[0]:enyo.bind(n[0],n[1]);e.push(t)},response:function(){return this.accumulate(this.responders,arguments),this},error:function(){return this.accumulate(this.errorHandlers,arguments),this},route:function(e,n){var t=enyo.bind(this,"respond");e.response(function(e,n){t(n)});var o=enyo.bind(this,"fail");e.error(function(e,n){o(n)}),e.go(n)},handle:function(e,n){var t=n.shift();if(t)if(t instanceof enyo.Async)this.route(t,e);else{var o=enyo.call(this.context||this,t,[this,e]);o=void 0!==o?o:e,(this.failed?this.fail:this.respond).call(this,o)}},startTimer:function(){this.startTime=enyo.now(),this.timeout&&(this.timeoutJob=setTimeout(enyo.bind(this,"timeoutComplete"),this.timeout))},endTimer:function(){this.timeoutJob&&(this.endTime=enyo.now(),clearTimeout(this.timeoutJob),this.timeoutJob=null,this.latency=this.endTime-this.startTime)},timeoutComplete:function(){this.timedout=!0,this.fail("timeout")},respond:function(e){this.failed=!1,this.endTimer(),this.handle(e,this.responders)},fail:function(e){this.failed=!0,this.endTimer(),this.handle(e,this.errorHandlers)},recover:function(){this.failed=!1},go:function(e){return enyo.asyncMethod(this,function(){this.respond(e)}),this}}),enyo.json={stringify:function(e,n,t){return JSON.stringify(e,n,t)},parse:function(e,n){return e?JSON.parse(e,n):null}},enyo.getCookie=function(e){var n=document.cookie.match(RegExp("(?:^|; )"+e+"=([^;]*)"));return n?decodeURIComponent(n[1]):void 0},enyo.setCookie=function(e,n,t){var o=e+"="+encodeURIComponent(n),r=t||{},i=r.expires;if("number"==typeof i){var s=new Date;s.setTime(s.getTime()+1e3*60*60*24*i),i=s}i&&i.toUTCString&&(r.expires=i.toUTCString());var a,c;for(a in r)o+="; "+a,c=r[a],c!==!0&&(o+="="+c);document.cookie=o},enyo.xhr={request:function(e){var n=this.getXMLHttpRequest(e),t=e.method||"GET",o=!e.sync;if(e.username?n.open(t,enyo.path.rewrite(e.url),o,e.username,e.password):n.open(t,enyo.path.rewrite(e.url),o),enyo.mixin(n,e.xhrFields),e.callback&&this.makeReadyStateHandler(n,e.callback),e.headers&&n.setRequestHeader)for(var r in e.headers)n.setRequestHeader(r,e.headers[r]);return"function"==typeof n.overrideMimeType&&e.mimeType&&n.overrideMimeType(e.mimeType),n.send(e.body||null),!o&&e.callback&&n.onreadystatechange(n),n},cancel:function(e){e.onload&&(e.onload=null),e.onreadystatechange&&(e.onreadystatechange=null),e.abort&&e.abort()},makeReadyStateHandler:function(e,n){window.XDomainRequest&&e instanceof XDomainRequest&&(e.onload=function(){var t;"string"==typeof e.responseText&&(t=e.responseText),n.apply(null,[t,e])}),e.onreadystatechange=function(){if(4==e.readyState){var t;"string"==typeof e.responseText&&(t=e.responseText),n.apply(null,[t,e])}}},inOrigin:function(e){var n=document.createElement("a"),t=!1;return n.href=e,(":"===n.protocol||n.protocol===window.location.protocol&&n.hostname===window.location.hostname&&n.port===(window.location.port||("https:"===window.location.protocol?"443":"80")))&&(t=!0),t},getXMLHttpRequest:function(e){try{if(10>enyo.platform.ie&&window.XDomainRequest&&!e.headers&&!this.inOrigin(e.url)&&!/^file:\/\//.test(window.location.href))return new XDomainRequest}catch(n){}try{return new XMLHttpRequest}catch(n){}return null}},enyo.AjaxProperties={cacheBust:!0,url:"",method:"GET",handleAs:"json",contentType:"application/x-www-form-urlencoded",sync:!1,headers:null,postBody:"",username:"",password:"",xhrFields:null,mimeType:null},enyo.kind({name:"enyo.Ajax",kind:enyo.Async,published:enyo.AjaxProperties,constructor:function(e){enyo.mixin(this,e),this.inherited(arguments)},go:function(e){return this.startTimer(),this.request(e),this},request:function(e){var n=this.url.split("?"),t=n.shift()||"",o=n.length?n.join("?").split("&"):[],r=null;enyo.isString(e)?r=e:e&&o.push(enyo.Ajax.objectToQuery(e)),"GET"==this.method&&(r&&(o.push(r),r=null),this.cacheBust&&!/^file:/i.test(t)&&o.push(Math.random()));var i=o.length?[t,o.join("&")].join("?"):t,s={};r=this.postBody||r,"GET"!=this.method&&("POST"===this.method&&window.FormData&&r instanceof FormData||(s["Content-Type"]=this.contentType)),enyo.mixin(s,this.headers),0===enyo.keys(s).length&&(s=void 0);try{this.xhr=enyo.xhr.request({url:i,method:this.method,callback:enyo.bind(this,"receive"),body:r,headers:s,sync:window.PalmSystem?!1:this.sync,username:this.username,password:this.password,xhrFields:this.xhrFields,mimeType:this.mimeType})}catch(a){this.fail(a)}},receive:function(e,n){if(!this.failed&&!this.destroyed){var t;"string"==typeof n.responseText&&(t=n.responseText),this.xhrResponse={status:n.status,headers:enyo.Ajax.parseResponseHeaders(n),body:t},this.isFailure(n)?this.fail(n.status):this.respond(this.xhrToResponse(n))}},fail:function(){this.xhr&&(enyo.xhr.cancel(this.xhr),this.xhr=null),this.inherited(arguments)},xhrToResponse:function(e){return e?this[(this.handleAs||"text")+"Handler"](e):void 0},isFailure:function(e){try{var n="";return"string"==typeof e.responseText&&(n=e.responseText),0===e.status&&""===n?!0:0!==e.status&&(200>e.status||e.status>=300)}catch(t){return!0}},xmlHandler:function(e){return e.responseXML},textHandler:function(e){return e.responseText},jsonHandler:function(e){var n=e.responseText;try{return n&&enyo.json.parse(n)}catch(t){return enyo.warn("Ajax request set to handleAs JSON but data was not in JSON format"),n}},statics:{objectToQuery:function(e){var n=encodeURIComponent,t=[],o={};for(var r in e){var i=e[r];if(i!=o[r]){var s=n(r)+"=";if(enyo.isArray(i))for(var a=0;i.length>a;a++)t.push(s+n(i[a]));else t.push(s+n(i))}}return t.join("&")},parseResponseHeaders:function(e){var n={},t=[];e.getAllResponseHeaders&&(t=e.getAllResponseHeaders().split(/\r?\n/));for(var o=0;t.length>o;o++){var r=t[o],i=r.indexOf(": ");if(i>0){var s=r.substring(0,i),a=r.substring(i+2);n[s]=a}}return n}}}),enyo.kind({name:"enyo.JsonpRequest",kind:enyo.Async,published:{url:"",charset:null,callbackName:"callback",cacheBust:!0},statics:{nextCallbackID:0},addScriptElement:function(){var e=document.createElement("script");e.src=this.src,e.async="async",this.charset&&(e.charset=this.charset),e.onerror=enyo.bind(this,function(){this.fail(400)});var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n),this.scriptTag=e},removeScriptElement:function(){var e=this.scriptTag;this.scriptTag=null,e.onerror=null,e.parentNode&&e.parentNode.removeChild(e)},constructor:function(e){enyo.mixin(this,e),this.inherited(arguments)},go:function(e){return this.startTimer(),this.jsonp(e),this},jsonp:function(e){var n="enyo_jsonp_callback_"+enyo.JsonpRequest.nextCallbackID++;this.src=this.buildUrl(e,n),this.addScriptElement(),window[n]=enyo.bind(this,this.respond);var t=enyo.bind(this,function(){this.removeScriptElement(),window[n]=null});this.response(t),this.error(t)},buildUrl:function(e,n){var t=this.url.split("?"),o=t.shift()||"",r=t.join("?").split("&"),i=this.bodyArgsFromParams(e,n);return r.push(i),this.cacheBust&&r.push(Math.random()),[o,r.join("&")].join("?")},bodyArgsFromParams:function(e,n){if(enyo.isString(e))return e.replace("=?","="+n);var t=enyo.mixin({},e);return t[this.callbackName]=n,enyo.Ajax.objectToQuery(t)}}),enyo.kind({name:"enyo._AjaxComponent",kind:enyo.Component,published:enyo.AjaxProperties}),enyo.kind({name:"enyo.WebService",kind:enyo._AjaxComponent,published:{jsonp:!1,callbackName:"callback",charset:null,timeout:0},events:{onResponse:"",onError:""},constructor:function(){this.inherited(arguments)},send:function(e){return this.jsonp?this.sendJsonp(e):this.sendAjax(e)},sendJsonp:function(e){var n=new enyo.JsonpRequest;for(var t in{url:1,callbackName:1,charset:1,timeout:1})n[t]=this[t];return this.sendAsync(n,e)},sendAjax:function(e){var n=new enyo.Ajax;for(var t in enyo.AjaxProperties)n[t]=this[t];return n.timeout=this.timeout,this.sendAsync(n,e)},sendAsync:function(e,n){return e.go(n).response(this,"response").error(this,"error")},response:function(e,n){this.doResponse({ajax:e,data:n})},error:function(e,n){this.doError({ajax:e,data:n})}}),function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Math.uuid=function(n,t){var o=e,r=[];if(t=t||o.length,n)for(var i=0;n>i;i++)r[i]=o[0|Math.random()*t];else{var s;r[8]=r[13]=r[18]=r[23]="-",r[14]="4";for(var i=0;36>i;i++)r[i]||(s=0|16*Math.random(),r[i]=o[19==i?8|3&s:s])}return r.join("")},Math.uuidFast=function(){for(var n,t=e,o=Array(36),r=0,i=0;36>i;i++)8==i||13==i||18==i||23==i?o[i]="-":14==i?o[i]="4":(2>=r&&(r=0|33554432+16777216*Math.random()),n=15&r,r>>=4,o[i]=t[19==i?8|3&n:n]);return o.join("")},Math.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=0|16*Math.random(),t="x"==e?n:8|3&n;return t.toString(16)}).toUpperCase()}}();var Crypto={};(function(){Crypto.MD5=function(e){function n(e,n){return e<<n|e>>>32-n}function t(e,n){var t,o,r,i,s;return r=2147483648&e,i=2147483648&n,t=1073741824&e,o=1073741824&n,s=(1073741823&e)+(1073741823&n),t&o?2147483648^s^r^i:t|o?1073741824&s?3221225472^s^r^i:1073741824^s^r^i:s^r^i}function o(e,n,t){return e&n|~e&t}function r(e,n,t){return e&t|n&~t}function i(e,n,t){return e^n^t}function s(e,n,t){return n^(e|~t)}function a(e,r,i,s,a,c,u){return e=t(e,t(t(o(r,i,s),a),u)),t(n(e,c),r)}function c(e,o,i,s,a,c,u){return e=t(e,t(t(r(o,i,s),a),u)),t(n(e,c),o)}function u(e,o,r,s,a,c,u){return e=t(e,t(t(i(o,r,s),a),u)),t(n(e,c),o)}function h(e,o,r,i,a,c,u){return e=t(e,t(t(s(o,r,i),a),u)),t(n(e,c),o)}function l(e){for(var n,t=e.length,o=t+8,r=(o-o%64)/64,i=16*(r+1),s=Array(i-1),a=0,c=0;t>c;)n=(c-c%4)/4,a=8*(c%4),s[n]=s[n]|e.charCodeAt(c)<<a,c++;return n=(c-c%4)/4,a=8*(c%4),s[n]=s[n]|128<<a,s[i-2]=t<<3,s[i-1]=t>>>29,s}function d(e){var n,t,o="",r="";for(t=0;3>=t;t++)n=255&e>>>8*t,r="0"+n.toString(16),o+=r.substr(r.length-2,2);
return o}var p,f,y,v,m,g,b,w,k,C=[],_=7,D=12,x=17,T=22,S=5,j=9,O=14,E=20,R=4,A=11,I=16,P=23,B=6,q=10,N=15,F=21;for(C=l(e),g=1732584193,b=4023233417,w=2562383102,k=271733878,p=0;C.length>p;p+=16)f=g,y=b,v=w,m=k,g=a(g,b,w,k,C[p+0],_,3614090360),k=a(k,g,b,w,C[p+1],D,3905402710),w=a(w,k,g,b,C[p+2],x,606105819),b=a(b,w,k,g,C[p+3],T,3250441966),g=a(g,b,w,k,C[p+4],_,4118548399),k=a(k,g,b,w,C[p+5],D,1200080426),w=a(w,k,g,b,C[p+6],x,2821735955),b=a(b,w,k,g,C[p+7],T,4249261313),g=a(g,b,w,k,C[p+8],_,1770035416),k=a(k,g,b,w,C[p+9],D,2336552879),w=a(w,k,g,b,C[p+10],x,4294925233),b=a(b,w,k,g,C[p+11],T,2304563134),g=a(g,b,w,k,C[p+12],_,1804603682),k=a(k,g,b,w,C[p+13],D,4254626195),w=a(w,k,g,b,C[p+14],x,2792965006),b=a(b,w,k,g,C[p+15],T,1236535329),g=c(g,b,w,k,C[p+1],S,4129170786),k=c(k,g,b,w,C[p+6],j,3225465664),w=c(w,k,g,b,C[p+11],O,643717713),b=c(b,w,k,g,C[p+0],E,3921069994),g=c(g,b,w,k,C[p+5],S,3593408605),k=c(k,g,b,w,C[p+10],j,38016083),w=c(w,k,g,b,C[p+15],O,3634488961),b=c(b,w,k,g,C[p+4],E,3889429448),g=c(g,b,w,k,C[p+9],S,568446438),k=c(k,g,b,w,C[p+14],j,3275163606),w=c(w,k,g,b,C[p+3],O,4107603335),b=c(b,w,k,g,C[p+8],E,1163531501),g=c(g,b,w,k,C[p+13],S,2850285829),k=c(k,g,b,w,C[p+2],j,4243563512),w=c(w,k,g,b,C[p+7],O,1735328473),b=c(b,w,k,g,C[p+12],E,2368359562),g=u(g,b,w,k,C[p+5],R,4294588738),k=u(k,g,b,w,C[p+8],A,2272392833),w=u(w,k,g,b,C[p+11],I,1839030562),b=u(b,w,k,g,C[p+14],P,4259657740),g=u(g,b,w,k,C[p+1],R,2763975236),k=u(k,g,b,w,C[p+4],A,1272893353),w=u(w,k,g,b,C[p+7],I,4139469664),b=u(b,w,k,g,C[p+10],P,3200236656),g=u(g,b,w,k,C[p+13],R,681279174),k=u(k,g,b,w,C[p+0],A,3936430074),w=u(w,k,g,b,C[p+3],I,3572445317),b=u(b,w,k,g,C[p+6],P,76029189),g=u(g,b,w,k,C[p+9],R,3654602809),k=u(k,g,b,w,C[p+12],A,3873151461),w=u(w,k,g,b,C[p+15],I,530742520),b=u(b,w,k,g,C[p+2],P,3299628645),g=h(g,b,w,k,C[p+0],B,4096336452),k=h(k,g,b,w,C[p+7],q,1126891415),w=h(w,k,g,b,C[p+14],N,2878612391),b=h(b,w,k,g,C[p+5],F,4237533241),g=h(g,b,w,k,C[p+12],B,1700485571),k=h(k,g,b,w,C[p+3],q,2399980690),w=h(w,k,g,b,C[p+10],N,4293915773),b=h(b,w,k,g,C[p+1],F,2240044497),g=h(g,b,w,k,C[p+8],B,1873313359),k=h(k,g,b,w,C[p+15],q,4264355552),w=h(w,k,g,b,C[p+6],N,2734768916),b=h(b,w,k,g,C[p+13],F,1309151649),g=h(g,b,w,k,C[p+4],B,4149444226),k=h(k,g,b,w,C[p+11],q,3174756917),w=h(w,k,g,b,C[p+2],N,718787259),b=h(b,w,k,g,C[p+9],F,3951481745),g=t(g,f),b=t(b,y),w=t(w,v),k=t(k,m);var L=d(g)+d(b)+d(w)+d(k);return L.toLowerCase()}})(),window.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB,window.IDBCursor=window.IDBCursor||window.webkitIDBCursor,window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction,IDBTransaction=IDBTransaction||{},IDBTransaction.READ_WRITE=IDBTransaction.READ_WRITE||"readwrite",IDBTransaction.READ=IDBTransaction.READ||"readonly",IDBCursor=IDBCursor||{},IDBCursor.NEXT=IDBCursor.NEXT||"next",IDBCursor.PREV=IDBCursor.PREV||"prev",enyo.kind({name:"RandomizedTimer",kind:enyo.Component,minInterval:50,published:{baseInterval:100,percentTrigger:50},events:{onTriggered:""},create:function(){this.inherited(arguments),this.start()},destroy:function(){this.stopTimer(),this.inherited(arguments)},start:function(){this.job=window.setInterval(enyo.bind(this,"timer"),this.baseInterval)},stop:function(){window.clearInterval(this.job)},timer:function(){Math.random()<.01*this.percentTrigger&&this.doTriggered({time:(new Date).getTime()})},baseIntervalChanged:function(){console.log("base"),this.baseInterval=Math.max(this.minInterval,this.baseInterval),this.stop(),this.start()}}),enyo.kind({name:"DataLayout",kind:null,constructor:function(e){this.container=e,e},destroy:function(){this.container}}),enyo.kind({name:"SundayDataIDB",kind:"DataLayout",published:{database:"",dbcallback:{},needupgrade:!1},async:enyo.Async,components:[{kind:"Signals",onCommit:"commit"}],DOC_STORE:"doc-store",CONFIG_STORE:"config-store",VIEW_STORE:"view-store",idb:!1,viewfunctions:{},returnarray:{},commit:function(e,n){n.dispatchTarget},handleerror:function(e,n){0===e.responders.length?e.response(function(){return{ok:!1,error:{status:500,error:n.type,reason:n.target}}}):e.go({ok:!1,error:{status:500,error:n.type,reason:n.target}})},success:function(e){console.log("onsuccess",e),this.idb=e.target.result;var n=this.idb.transaction(this.DOC_STORE,IDBTransaction.READ),t=n.objectStore(this.DOC_STORE).openCursor();t.onsuccess=enyo.bind(this,this.viewresults),t.onerror=enyo.bind(this,this.handleerror)},viewresults:function(e){var n=e.target.result;if(n){var t={key:n.key,id:n.primaryKey,value:n.value},o=t.id.match(/^_design\/(.*)/);if(null!==o)for(var r in t.value.views)this.viewfunctions[o[1]+"_"+r]=t.value.views[r].map;n["continue"]()}else this.unrollpreque()},unrollpreque:function(){pq=this.preque;for(var e=pq.length,n=0;e>n;n++)"builkDocs"===pq[n].type?this.bulkDocs(pq[n].docs,pq[n].async):"allDocs"===pq[n].type?this.allDocs(null,pq[n].async):"put"===pq[n].type?this.put(pq[n].doc,pq[n].options,pq[n].async):"get"===pq[n].type?this.get(pq[n].docid,pq[n].async):"remove"===pq[n].type?this.remove(pq[n].docid,pq[n].localrev,pq[n].async):"query"===pq[n].type&&this.remove(pq[n].fun,pq[n].options,pq[n].async);this.preque=[]},versioncomplete:function(){0===this.dbcallback.responders.length?this.dbcallback.response(function(){return{ok:!0}}):this.dbcallback.go({ok:!0})},versionsuccess:function(e,n){n.target.result.oncomplete=enyo.bind(this,this.versioncomplete),this.upgradeneeded(e)},upgradeneeded:function(e){e.target.result.createObjectStore(this.DOC_STORE,{keyPath:"_id"}),e.target.result.createObjectStore(this.CONFIG_STORE,{keyPath:"config"})},constructor:function(e){this.inherited(arguments),this.preque=[],this.dbcallback=new enyo.Async,"string"==typeof e?e&&(this.database=e):void 0!==this.container.database&&(this.database=this.container.database);var n=indexedDB.open(this.database);n.onsuccess=enyo.bind(this,this.success),n.onerror=enyo.bind(this,this.handleerror,this.dbcallback),n.onupgradeneeded=enyo.bind(this,this.upgradeneeded),n.onblocked=function(){}},removeDB:function(e){this.idb.close();var n=enyo.global.indexedDB.deleteDatabase(this.database);return n.onsuccess=enyo.bind(this,this.removeDBsuccess,e),n.onerror=enyo.bind(this,this.handleerror,e),e},removeDBsuccess:function(e){0===e.responders.length?e.response(function(){return{ok:!0}}):e.go({ok:!0})},runview:function(view,funstring,docu){if(void 0!==docu){var emit=function(e,n){docu["_view_"+view]=e,docu["_view_"+view+"_value"]=n};eval("var fun = "+funstring),fun(docu),"_view_"+view in docu||(docu["_view_"+view]=null,docu["_view_"+view+"_value"]=null),async=new enyo.Async;var txn=this.idb.transaction(this.DOC_STORE,IDBTransaction.READ_WRITE),datastore=txn.objectStore(this.DOC_STORE).get(docu._id);datastore.onsuccess=enyo.bind(this,this.putupdate,async,docu),datastore.onerror=enyo.bind(this,this.handleerror,async)}else{var async=new enyo.Async,parent=this;async.response(function(e,n){console.log("inSender",e),console.log("inResponse",n),console.log("parent",parent);for(var t in n.rows){var o=n.rows[t].id.match(/^_design\/(.*)/);null===o&&parent.runview(view,funstring,n.rows[t].value)}}),this.allDocs({},async)}},upgradeneededview:function(e,n){var t=n.currentTarget.transaction.objectStore(this.DOC_STORE);for(var o in e)t.createIndex(e[o].replace("/","_"),"_view_"+e[o].replace("/","_"),{unique:!1})},putview:function(e,n,t){this.idb=t.target.result;var o=this.idb.transaction(this.DOC_STORE,IDBTransaction.READ_WRITE),r=o.objectStore(this.DOC_STORE).get(e._id);r.onsuccess=enyo.bind(this,this.putupdate,n,e),r.onerror=enyo.bind(this,this.handleerror,n)},put:function(e,n,t){if(void 0===t&&(t=new enyo.Async),this.idb){void 0===e._id&&(e._id=Math.uuid(32,16).toLowerCase());var o=e._id.match(/_design\/(.*)/);if(void 0===e._localrev&&(e._localrev="1-"+Math.uuid(32,16).toLowerCase()),null===o){if(0!==this.viewfunctions.length){var r=this.idb.transaction(this.DOC_STORE,IDBTransaction.READ_WRITE),i=r.objectStore(this.DOC_STORE).get(e._id);i.onsuccess=enyo.bind(this,this.putupdate,t,e),i.onerror=enyo.bind(this,this.handleerror,t);for(var s in this.viewfunctions)this.runview(s,this.viewfunctions[s],e)}}else if(void 0!==e.views){var a=e._id.match(/^_design\/(.*)/),c=[];for(var u in e.views)this.viewfunctions[a[1]+"_"+u]=e.views[u].map,c.push(a[1]+"/"+u),this.runview(a[1]+"/"+u,e.views[u].map);var h=this.idb.version;this.idb.close(),this.idb=!1;var l=indexedDB.open(this.database,h+1);l.onsuccess=enyo.bind(this,this.putview,e,t),l.onerror=enyo.bind(this,this.handleerror,this.dbcallback),l.onupgradeneeded=enyo.bind(this,this.upgradeneededview,c),l.onblocked=function(e){console.log("got blocked:"+e)}}}else this.preque.push({type:"put",doc:e,options:n,async:t});return t},putupdate:function(e,n,t){var o=t.target.result,r=this.idb.transaction(this.DOC_STORE,IDBTransaction.READ_WRITE),i={};if(o){var s=o._deleted?!0:!1;if(void 0!==o._localrev||s)if(s||o._localrev===n._localrev||parseInt(n._localrev[0],10)>parseInt(o._localrev[0],10)){if(!s){var a=parseInt(n._localrev[0],10)+1;n._localrev=a+"-"+Math.uuid(32,16).toLowerCase()}n._revhistory=o,i=r.objectStore(this.DOC_STORE).put(n),i.onsuccess=enyo.bind(this,this.putsuccess,e,n._localrev),i.onerror=enyo.bind(this,this.handleerror,e)}else 0===e.responders.length?e.response(function(){return{error:"conflict",reason:"Document update conflict."}}):e.go({error:"conflict",reason:"Document update conflict."})}else i=r.objectStore(this.DOC_STORE).put(n),i.onsuccess=enyo.bind(this,this.putsuccess,e,n._localrev),i.onerror=enyo.bind(this,this.handleerror,e)},putsuccess:function(e,n,t){var o=t.target.result;enyo.Signals.send("onCommit",{status:"changed",id:o,sender:"SundayData.put",database:this.databaseName}),0===e.responders.length?e.response(function(){return{ok:!0,id:o,localrev:n}}):e.go({ok:!0,id:o,localrev:n})},bulkDocs:function(e,n,t){if(void 0===t&&(t=new enyo.Async),this.idb){var o="bulk"+Math.uuid(32,16).toLowerCase();this.returnarray[o]=[];var r=e.length;putrespfun=function(e,n){n.ok===!0?this.bulkDocsresults(t,r,o,{id:n.id,localrev:n.localrev}):this.bulkDocsresults(t,r,o,n)},removerespfun=function(e,n){n.ok===!0?this.bulkDocsresults(t,r,o,{id:n.id,localrev:n.localrev,_deleted:!0}):this.bulkDocsresults(t,r,o,n)};for(var i=0;r>i;i++){var s=e[i];if(void 0===s._deleted){var a=this.put(s);a.response(this,putrespfun)}else{var c=this.remove(s._id,s._localrev);c.response(this,removerespfun)}}}else this.preque.push({type:"builkDocs",docs:e,async:t});return t},bulkDocsresults:function(e,n,t,o){if(this.returnarray[t].push(o),this.returnarray[t].length===n){var r=this.returnarray[t];delete this.returnarray[t],0===e.responders.length?e.response(this,function(){return r}):e.go(r)}},get:function(e,n){if(void 0===n&&(n=new enyo.Async),this.idb){var t=this.idb.transaction(this.DOC_STORE,IDBTransaction.READ),o=t.objectStore(this.DOC_STORE).get(e);o.onsuccess=enyo.bind(this,this.getsuccess,n),o.onerror=enyo.bind(this,this.handleerror,n)}else this.preque.push({type:"get",docid:e,async:n});return n},getsuccess:function(e,n){var t=n.target.result;if(void 0!==t){if(void 0!==t._revhistory){delete t._revhistory;var o=/^_view_.*/;for(var r in t)null!==r.match(o)&&delete t[r]}t._deleted?0===e.responders.length?e.response(function(){return{error:"Not Found",reason:"Deleted"}}):e.go({error:"Not Found",reason:"Deleted"}):0===e.responders.length?e.response(function(){return t}):e.go(t)}else 0===e.responders.length?e.response(function(){return{error:"Not Found"}}):e.go({error:"Not Found"})},allDocs:function(e,n){if(void 0===n&&(n=new enyo.Async),this.idb){var t="all"+Math.uuid(32,16).toLowerCase();this.returnarray[t]=[];var o=this.idb.transaction(this.DOC_STORE,IDBTransaction.READ),r=o.objectStore(this.DOC_STORE).openCursor();r.onsuccess=enyo.bind(this,this.allDocssuccess,n,t),r.onerror=enyo.bind(this,this.handleerror,n)}else this.preque.push({type:"allDocs",async:n});return n},allDocssuccess:function(e,n){var t=event.target.result;if(t){var o={key:t.key,id:t.primaryKey,value:t.value};if(void 0===o.value._deleted){delete o.value._revhistory;var r=/^_view_.*/;for(var i in o.value)null!==i.match(r)&&delete o.value[i];this.returnarray[n].push(o)}t["continue"]()}else{var s={total_rows:this.returnarray[n].length,rows:this.returnarray[n]};delete this.returnarray[n],0===e.responders.length?e.response(this,function(){return s}):e.go(s)}},query:function(e,n,t){if(void 0===t&&(t=new enyo.Async),this.idb){var o="query"+Math.uuid(32,16).toLowerCase();this.returnarray[o]=[];var r=this.idb.transaction(this.DOC_STORE,IDBTransaction.READ),i=r.objectStore(this.DOC_STORE),s=i.index(e.replace("/","_")).openCursor();s.onsuccess=enyo.bind(this,this.querysuccess,t,o,e),s.onerror=enyo.bind(this,this.handleerror,t)}else this.preque.push({type:"query",fun:e,options:n,async:t});return t},querysuccess:function(e,n,t){var o=event.target.result;if(o){if(null!==o.key||null!==o.value["_view_"+t.replace("/","_")+"_value"]){var r={key:o.key,id:o.primaryKey,value:o.value["_view_"+t.replace("/","_")+"_value"]};if(void 0===r.value._deleted){delete r.value._revhistory;var i=/^_view_.*/;for(var s in r.value)null!==s.match(i)&&delete r.value[s];this.returnarray[n].push(r)}}o["continue"]()}else{var a={total_rows:this.returnarray[n].length,rows:this.returnarray[n]};delete this.returnarray[n],0===e.responders.length?e.response(this,function(){return a}):e.go(a)}},remove:function(e,n,t){if(void 0===t&&(t=new enyo.Async),this.idb){var o=this.idb.transaction(this.DOC_STORE,IDBTransaction.READ_WRITE),r=o.objectStore(this.DOC_STORE).get(e);r.onsuccess=enyo.bind(this,this.removeget,t,n),r.onerror=enyo.bind(this,this.handleerror,t)}else this.preque.push({type:"remove",docid:e,localrev:n,async:t});return t},removeget:function(e,n,t){var o=t.target.result;if(n===o._localrev){doc={_deleted:!0},doc._id=o._id,doc._localrev=o._localrev,doc._revhistory=o;var r=this.idb.transaction(this.DOC_STORE,IDBTransaction.READ_WRITE),i=r.objectStore(this.DOC_STORE).put(doc);i.onsuccess=enyo.bind(this,this.removesuccess,e,doc._id,doc._localrev),i.onerror=enyo.bind(this,this.handleerror,e)}},removesuccess:function(e,n,t){0===e.responders.length?e.response(function(){return{ok:!0,id:n,localrev:t}}):e.go({ok:!0,id:n,localrev:t})},getConfig:function(e,n){if(void 0===n&&(n=new enyo.Async),this.idb){var t=this.idb.transaction(this.CONFIG_STORE,IDBTransaction.READ),o=t.objectStore(this.CONFIG_STORE).get(e);o.onsuccess=enyo.bind(this,this.getconfigsuccess,n),o.onerror=enyo.bind(this,this.handleerror,n)}else this.preque.push({type:"get",docid:e,async:n});return n},getconfigsuccess:function(e,n){var t=n.target.result;void 0!==t&&(0===e.responders.length?e.response(function(){return t}):e.go(t))}}),enyo.kind({name:"SundayDataHTTP",kind:"DataLayout",published:{database:"",host:"",dbcallback:{}},async:enyo.Ajax,components:[{kind:"Signals",onCommit:"commit"}],returnarray:{},commit:function(e,n){var t=n.dispatchTarget;console.log("inSender",e),console.log("inEvent",n),console.log("dtarget",t)},handleerror:function(e,n){0===e.responders.length?e.response(function(){return{ok:!1,error:{status:500,error:n.type,reason:n.target}}}):e.go({ok:!1,error:{status:500,error:n.type,reason:n.target}})},constructor:function(){this.inherited(arguments),this.start()},start:function(e,n){console.log("this",this),console.log("container",this.container),void 0===e&&void 0===n&&void 0!==this.container&&(this.host=this.container.host,this.database=this.container.database),"string"==typeof n&&n&&(this.database=n),"string"==typeof e&&e&&(this.host=e),console.log("database",this.database),console.log("host",this.host),this.dbcallback=new enyo.Ajax({url:this.host+"/"+this.database+"/",method:"PUT",contentType:"application/json",cacheBust:!1}),this.dbcallback.go()},removeDB:function(e){return void 0===e&&(e=new enyo.Ajax),e.url=this.host+"/"+db+"/",e.go(),e},put:function(e,n,t){return void 0===t&&(t=new enyo.Ajax),t.url=this.host+"/"+this.database+"/",t.method="POST",t.contentType="application/json",t.cacheBust=!1,t.postBody=JSON.stringify(e),t.go(),t},bulkDocs:function(e,n,t){return void 0===t&&(t=new enyo.Ajax),t.url=this.host+"/"+this.database+"/_bulk_docs",t.method="POST",t.contentType="application/json",t.cacheBust=!1,t.go(JSON.stringify({docs:e})),t},get:function(e,n){return void 0===n&&(n=new enyo.Ajax),n.url=this.host+"/"+this.database+"/"+e,n.method="GET",n.cacheBust=!1,n.go(),n},allDocs:function(e,n){return void 0===n&&(n=new enyo.Ajax),n.url=this.host+"/"+this.database+"/_all_docs",n.method="GET",n.contentType="application/json",n.cacheBust=!1,n.go(e),n},query:function(e,n,t){var o,r;if("string"==typeof e){var i=e.split("/");o=i[0],r=i[1]}return void 0===t&&(t=new enyo.Ajax),t.url=this.host+"/"+this.database+"/_design/"+o+"/_view/"+r,t.method="GET",t.contentType="application/json",t.cacheBust=!1,t.go(JSON.stringify(n)),t},remove:function(e,n,t){return void 0===t&&(t=new enyo.Ajax),t.url=this.host+"/"+this.database+"/"+e+"?rev="+n,t.method="DELETE",t.cacheBust=!1,t.go(),t},changes:function(e,n){return void 0===e&&(e=0),void 0===n&&(n=new enyo.Ajax),n.url=this.host+"/"+this.database+"/_changes?since="+e,n.method="GET",n.cacheBust=!1,n.go(),n}}),enyo.kind({name:"SundayData",kind:"enyo.Component",published:{dataStore:"",url:"",database:"",host:""},data:null,constructor:function(e){this.inherited(arguments),void 0!==e&&"string"==typeof e&&this.setUrl(e)},setUrl:function(e){var n=/idb\:\/\/(\w*)\/?/,t=/(https?\:\/\/\w*\:?\d*)\/(\w*)/;if("string"==typeof e){var o=e.match(n);if(null!==o)""!==o[1]&&(this.setDatabase(o[1]),this.setDataStore("SundayDataIDB"));else{var r=e.match(t);console.log(r),null!==r&&""!==r[1]&&""!==r[2]&&(console.log("http"),this.setHost(r[1]),this.setDatabase(r[2]),this.setDataStore("SundayDataHTTP"))}}},dataStoreChanged:function(){this.data&&this.data.destroy(),this.data=""!==this.host?enyo.createFromKind(this.dataStore,this):enyo.createFromKind(this.dataStore,this),this.generated&&this.render()},removeDB:function(e){if(this.data){void 0===e&&(e=new this.data.async);var n=new SundayDataReturn;return n.parent=this,e.error(function(e,n){var t={error:"Unknown",reason:n};return this.recover(),t}),e.response(function(e,t){n.setValue(t),n.parent.data.destroy()}),this.data.removeDB(e),n}},put:function(e,n,t){if(console.log("doc",e),this.data){void 0===t&&(t=new this.data.async);var o=new SundayDataReturn;return o.parent=this,t.error(function(e,n){var t={error:"Unknown",reason:n};return this.recover(),t}),t.response(function(e,n){o.setValue(n)}),this.data.put(e,n,t),o}},get:function(e,n,t){if(this.data){void 0===t&&(t=new this.data.async);var o=new SundayDataReturn;return o.parent=this,t.error(function(e,n){var t={error:"Unknown",reason:n};return 404===n&&(t={error:"Not Found",reason:n}),this.recover(),t}),t.response(function(e,n){o.setValue(n)}),this.data.get(e,t),o}},allDocs:function(e,n){if(this.data){void 0===n&&(n=new this.data.async);var t=new SundayDataReturn;return t.parent=this,n.error(function(e,n){var t={error:"Unknown",reason:n};return this.recover(),t}),n.response(function(e,n){t.setValue(n)}),this.data.allDocs(e,n),t}},bulkDocs:function(e,n,t){if(this.data){void 0===t&&(t=new this.data.async);var o=new SundayDataReturn;return o.parent=this,t.error(function(e,n){var t={error:"Unknown",reason:n};return this.recover(),t}),t.response(function(e,n){o.setValue(n)}),this.data.bulkDocs(e,n,t),o}},remove:function(e,n,t){if(this.data){void 0===t&&(t=new this.data.async);var o=new SundayDataReturn;return o.parent=this,t.error(function(e,n){var t={error:"Unknown",reason:n};return 404===n?t={error:"Not Found",reason:n}:409===n&&(t={error:"Conflict",reason:n}),this.recover(),t}),t.response(function(e,n){o.setValue(n)}),this.data.remove(e,n,t),o}},query:function(e,n,t){if(this.data){void 0===t&&(t=new this.data.async);var o=new SundayDataReturn;return o.parent=this,t.error(function(e,n){var t={error:"Unknown",reason:n};return this.recover(),t}),t.response(function(e,n){o.setValue(n)}),this.data.query(e,n,t),o}},replicate:function(e,n){if(this.data){var t={},o=/idb\:\/\/(\w*)\/?/,r=/(https?\:\/\/\w*\:?\d*)\/(\w*)/,i=e.match(o);if(null!==i)""!==i[1]&&(t.database=i[1],t.dataStore="SundayDataIDB",n=new enyo.Async);else{var s=e.match(r);null!==s&&""!==s[1]&&""!==s[2]&&(t.host=s[1],t.database=s[2],t.dataStore="SundayDataHTTP",n=new enyo.Ajax)}var a=enyo.createFromKind(t.DataStore,t);console.log(a);var c=this.data;console.log("parent",c),n.response(function(e,n){console.log("inSender",e),console.log("inResponse",n),console.log("parent",c);var t=[];for(var o in n.rows)t.push(n.rows[o].doc);console.log("docs",t),c.bulkDocs(t)}),a.allDocs("include_docs=true&update_seq=true",n)}}}),enyo.createFromKind=function(e,n){var t=e&&enyo.constructorForKind(e);return t?new t(n):void 0};var SundayDataReturn=function(){this.resultStack=[],this.value=null,this.parent=null,this.setValue=function(e){this.value=e,this._results(e)},this.done=function(e){if(void 0===e&&(e=function(e){return console.log("value:",e),e}),null===this.value)this.resultStack.push(e);else{var n=e(value);void 0!==n?this.setValue(n):this.setValue(this.value)}return this},this._results=function(e){if(this.resultStack.length>0){var n=this.resultStack.shift(),t=n(e);null!==t&&(void 0!==t?this.setValue(t):this.setValue(this.value))}},this.get=function(e,n){if(void 0===e){if(null!==this.value)return e=void 0===this.value.id?this.value._id:this.value.id,void 0!==e?this.parent.get(e):this;var t=this,o=function(e){if(void 0!==e){var n=void 0===e.id?e._id:e.id;void 0!==n?t.parent.get(n).done(function(e){t.setValue(e)}):t.setValue(e)}return null};return this.resultStack.push(o),this}return this.parent.get(e,n)},this.put=function(e,n){if(void 0===e){if(null!==this.value)return id=void 0===this.value.id?this.value._id:this.value.id,void 0!==id?this.parent.put(this.value):this;var t=this,o=function(e){if(void 0!==e){var n=void 0===e.id?e._id:e.id;void 0!==n?t.parent.put(e).done(function(e){t.setValue(e)}):t.setValue(e)}return null};return this.resultStack.push(o),this}return this.parent.put(e,n)},this.removeDB=function(){return this.parent.removeDB()},this.bulkDocs=function(e,n){return this.parent.bulkDocs(e,n)},this.remove=function(e,n){if(void 0===e){if(null!==this.value)return e=void 0===this.value.id?this.value._id:this.value.id,n=void 0===this.value.rev?this.value._rev:this.value.rev,void 0!==e?this.parent.remove(e,n):this;var t=this,o=function(e){if(void 0!==e){var n=void 0===e.id?e._id:e.id,o=void 0===e.rev?e._rev:e.rev;void 0!==n?t.parent.remove(n,o).done(function(e){t.setValue(e)}):t.setValue(e)}return null};return this.resultStack.push(o),this}return this.parent.remove(e,n)},this.query=function(e,n){return this.parent.query(e,n)},this.replicate=function(e){return this.parent.replicate(e)}};